<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[B]03.03 - –ü–µ—Ä–µ–≥–ª—è–¥–∞—á –º–µ–º—ñ–≤ –∑ API</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: #252526;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }
        h1 {
            color: #4ec9b0;
            border-bottom: 2px solid #4ec9b0;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .description {
            background: #2d2d30;
            padding: 15px;
            border-left: 4px solid #007acc;
            margin: 20px 0;
        }
        .meme-container {
            background: #1e1e1e;
            padding: 20px;
            border-radius: 5px;
            min-height: 400px;
            margin-top: 20px;
            border: 1px solid #3e3e42;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .meme-image {
            max-width: 100%;
            max-height: 500px;
            border-radius: 5px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            margin-bottom: 15px;
        }
        .meme-title {
            color: #4ec9b0;
            font-size: 16px;
            text-align: center;
            padding: 10px;
            background: #2d2d30;
            border-radius: 5px;
            margin-top: 10px;
            width: 100%;
        }
        .loading {
            color: #9cdcfe;
            font-size: 1.1em;
        }
        .error {
            color: #f48771;
            font-size: 1.1em;
            text-align: center;
        }
        .info-panel {
            background: #2d2d30;
            padding: 15px;
            border-left: 3px solid #4ec9b0;
            margin: 20px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .timer-section {
            color: #9cdcfe;
        }
        .timer {
            font-weight: bold;
            color: #4ec9b0;
            font-size: 1.2em;
        }
        button {
            background: #007acc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
            width: 100%;
        }
        button:hover {
            background: #005a9e;
        }
        button:disabled {
            background: #555;
            cursor: not-allowed;
        }
        .stats {
            color: #dcdcaa;
            font-size: 14px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>[B]03.03. –ü–µ—Ä–µ–≥–ª—è–¥–∞—á –º–µ–º—ñ–≤ –∑ API ü§°</h1>

        <div class="description">
            <strong>–ó–∞–≤–¥–∞–Ω–Ω—è:</strong> –ù–∞–ø–∏—à—ñ—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –º–µ–º—ñ–≤ –∑ API
            <code>https://api.imgflip.com/get_memes</code>.
            –û–±—Ä–æ–±—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥—å —ñ–∑ –∑–∞–∑–Ω–∞—á–µ–Ω–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é —Ç–∞ –æ–±–µ—Ä—ñ—Ç—å –≤–∏–ø–∞–¥–∫–æ–≤–∏–π –º–µ–º —á–µ—Ä–µ–∑
            <code>Math.floor(Math.random() * array.length)</code>.
            –í—ñ–¥–æ–±—Ä–∞–∑—ñ—Ç—å –æ—Ç—Ä–∏–º–∞–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ.
            <br><br>
            <strong>–í–∫–∞–∑—ñ–≤–∫–∞:</strong> –ó–∞—Å—Ç–æ—Å—É–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é <code>setTimeout()</code> –¥–ª—è —Ç–æ–≥–æ,
            —â–æ–± –¥–∏–Ω–∞–º—ñ—á–Ω–æ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –π–æ–≥–æ –∫–æ–∂–Ω—ñ 10 —Å–µ–∫—É–Ω–¥.
        </div>

        <div class="meme-container" id="memeContainer">
            <div class="loading">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–µ–º—É...</div>
        </div>

        <div class="info-panel">
            <div class="timer-section">
                –ù–∞—Å—Ç—É–ø–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑: <span class="timer" id="timer">10</span> —Å–µ–∫
            </div>
            <div class="stats" id="stats">
                –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ –º–µ–º—ñ–≤: <span id="memeCount">0</span>
            </div>
        </div>

        <button id="refreshBtn">üîÑ –û–Ω–æ–≤–∏—Ç–∏ –º–µ–º –∑–∞—Ä–∞–∑</button>
    </div>

    <script>
        let currentMemes = [];
        let autoRefreshInterval;
        let countdownInterval;
        let timeLeft = 10;
        let memeDisplayCount = 0;

        const memeContainer = document.getElementById('memeContainer');
        const timerElement = document.getElementById('timer');
        const refreshBtn = document.getElementById('refreshBtn');
        const memeCountElement = document.getElementById('memeCount');

        async function fetchMemes() {
            try {
                const response = await fetch('https://api.imgflip.com/get_memes');

                if (!response.ok) {
                    throw new Error('HTTP –ø–æ–º–∏–ª–∫–∞! –°—Ç–∞—Ç—É—Å: ' + response.status);
                }

                const data = await response.json();

                if (data.success && data.data && data.data.memes) {
                    currentMemes = data.data.memes;
                    displayRandomMeme();
                } else {
                    throw new Error('–ù–µ–≤—ñ—Ä–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ API');
                }
            } catch (error) {
                displayError('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è: ' + error.message);
            }
        }

        function displayRandomMeme() {
            if (currentMemes.length === 0) {
                memeContainer.innerHTML = '<div class="error">–ú–µ–º–∏ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω—ñ</div>';
                return;
            }

            const randomIndex = Math.floor(Math.random() * currentMemes.length);
            const randomMeme = currentMemes[randomIndex];

            memeContainer.innerHTML =
                '<img src="' + randomMeme.url + '" ' +
                'alt="' + randomMeme.name + '" ' +
                'class="meme-image" ' +
                'onerror="this.parentElement.innerHTML=\'<div class=&quot;error&quot;>–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è</div>\'">' +
                '<div class="meme-title">' + randomMeme.name + '</div>';

            memeDisplayCount++;
            memeCountElement.textContent = memeDisplayCount;
        }

        function displayError(message) {
            memeContainer.innerHTML = '<div class="error">' + message + '</div>';
        }

        function updateTimer() {
            if (timeLeft === 0) {
                timeLeft = 10;
            } else {
                timeLeft--;
            }
            timerElement.textContent = timeLeft;
        }

        function resetTimer() {
            timeLeft = 10;
            timerElement.textContent = timeLeft;
        }

        async function init() {
            await fetchMemes();

            autoRefreshInterval = setInterval(() => {
                displayRandomMeme();
                resetTimer();
            }, 10000);

            countdownInterval = setInterval(updateTimer, 1000);
        }

        refreshBtn.addEventListener('click', () => {
            displayRandomMeme();
            resetTimer();
        });

        init();
    </script>
</body>
</html>