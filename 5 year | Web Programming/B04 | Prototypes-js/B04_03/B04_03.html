<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–∞–≤–¥–∞–Ω–Ω—è B04.03 - Candy —Ç–∞ Present</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(to bottom right, #f0f9ff, #e0f2fe, #fef3c7);
            min-height: 100vh;
            padding: 40px 20px;
        }
        .container {
            max-width: 1100px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            padding: 48px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #0c4a6e;
            margin-bottom: 12px;
            text-align: center;
        }
        h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #0369a1;
            margin-top: 40px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #e0f2fe;
        }
        h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: #0c4a6e;
            margin: 20px 0 12px 0;
        }
        h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #0284c7;
            margin: 16px 0 8px 0;
        }
        p {
            color: #475569;
            line-height: 1.7;
            margin-bottom: 16px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        th {
            background: #e0f2fe;
            border: 1px solid #bae6fd;
            color: #0c4a6e;
            padding: 16px;
            text-align: left;
            font-weight: 600;
            font-size: 0.95rem;
        }
        td {
            padding: 14px 16px;
            border-bottom: 1px solid #f1f5f9;
            color: #475569;
        }
        tr:hover {
            background: #f8fafc;
        }
        .candy-card {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 10px;
            padding: 12px 16px;
            margin: 8px 0;
            font-size: 0.95rem;
        }
        .present-box {
            background: linear-gradient(135deg, #e0f2fe 0%, #dbeafe 100%);
            border: 1px solid #bae6fd;
            padding: 28px;
            margin: 20px 0;
            border-radius: 16px;
        }
        .weight-info {
            background: #fef3c7;
            border: 1px solid #fde68a;
            padding: 16px;
            border-radius: 10px;
            margin: 16px 0;
            color: #92400e;
        }
        .suitable-candies {
            background: #ecfdf5;
            border: 1px solid #a7f3d0;
            padding: 20px;
            border-radius: 12px;
            margin: 16px 0;
        }
        .suitable-candies ul {
            margin-top: 12px;
            margin-left: 24px;
        }
        .suitable-candies li {
            color: #065f46;
            padding: 4px 0;
        }
        code {
            background: #f1f5f9;
            padding: 2px 8px;
            border-radius: 4px;
            color: #0284c7;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üç¨ –ó–∞–≤–¥–∞–Ω–Ω—è [B]04.03</h1>
        <h2>–û–ø–∏—Å –∑–∞–≤–¥–∞–Ω–Ω—è</h2>
        <p>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –ø—Ä–æ—Ç–æ—Ç–∏–ø–Ω–æ-–æ—Ä—ñ—î–Ω—Ç–æ–≤–∞–Ω—É –º–æ–¥–µ–ª—å (–±–µ–∑ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É <strong><code>class</code></strong>),
            –æ–ø–∏—à—ñ—Ç—å "—Å—É–ø–µ—Ä-–∫–ª–∞—Å" <strong>Candy</strong>. –í–∏–∑–Ω–∞—á–∏—Ç—å —ñ—î—Ä–∞—Ä—Ö—ñ—é —Ü—É–∫–µ—Ä–æ–∫. –°—Ç–≤–æ—Ä—ñ—Ç—å –∫—ñ–ª—å–∫–∞ –æ–±'—î–∫—Ç—ñ–≤-—Ü—É–∫–µ—Ä–æ–∫.
            –ó–±–µ—Ä—ñ—Ç—å –¥–∏—Ç—è—á–∏–π –ø–æ–¥–∞—Ä—É–Ω–æ–∫ <strong>Present</strong> –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –π–æ–≥–æ –≤–∞–≥–∏. –ó–Ω–∞–π–¥—ñ—Ç—å —Ü—É–∫–µ—Ä–∫–∏ –≤ –ø–æ–¥–∞—Ä—É–Ω–∫—É,
            —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å –∑–∞–¥–∞–Ω–æ–º—É –¥—ñ–∞–ø–∞–∑–æ–Ω—É –≤–º—ñ—Å—Ç—É —Ü—É–∫—Ä—É.</p>

        <h2>–û–±'—î–∫—Ç–∏-—Ü—É–∫–µ—Ä–∫–∏</h2>
        <div id="candies-list"></div>

        <h2>üéÅ –§–æ—Ä–º—É–≤–∞–Ω–Ω—è –ø–æ–¥–∞—Ä—É–Ω–∫–∞</h2>
        <div id="present-info"></div>

        <h2>üîç –ü–æ—à—É–∫ —Ü—É–∫–µ—Ä–æ–∫ –∑–∞ –≤–º—ñ—Å—Ç–æ–º —Ü—É–∫—Ä—É</h2>
        <div id="search-results"></div>
    </div>

    <script>
        function Candy(name, weight, sugarContent) {
            this.name = name;
            this.weight = weight;
            this.sugarContent = sugarContent;
        }

        Candy.prototype.toString = function() {
            return `${this.name} (–≤–∞–≥–∞: ${this.weight}–≥, —Ü—É–∫–æ—Ä: ${this.sugarContent}%)`;
        };

        // –®–æ–∫–æ–ª–∞–¥–Ω–∞ —Ü—É–∫–µ—Ä–∫–∞
        function ChocolateCandy(name, weight, sugarContent, cocoaPercent) {
            Candy.call(this, name, weight, sugarContent);
            this.cocoaPercent = cocoaPercent;
            this.type = '–®–æ–∫–æ–ª–∞–¥–Ω–∞';
        }
        ChocolateCandy.prototype = Object.create(Candy.prototype);
        ChocolateCandy.prototype.constructor = ChocolateCandy;

        // –ö–∞—Ä–∞–º–µ–ª—å
        function Caramel(name, weight, sugarContent, flavor) {
            Candy.call(this, name, weight, sugarContent);
            this.flavor = flavor;
            this.type = '–ö–∞—Ä–∞–º–µ–ª—å';
        }
        Caramel.prototype = Object.create(Candy.prototype);
        Caramel.prototype.constructor = Caramel;

        // –õ—å–æ–¥—è–Ω–∏–∫
        function Lollipop(name, weight, sugarContent, shape) {
            Candy.call(this, name, weight, sugarContent);
            this.shape = shape;
            this.type = '–õ—å–æ–¥—è–Ω–∏–∫';
        }
        Lollipop.prototype = Object.create(Candy.prototype);
        Lollipop.prototype.constructor = Lollipop;

        // –ü–æ–¥–∞—Ä—É–Ω–æ–∫ Present
        function Present(maxWeight) {
            this.maxWeight = maxWeight;
            this.candies = [];
            this.currentWeight = 0;
        }

        Present.prototype.addCandy = function(candy) {
            if (this.currentWeight + candy.weight <= this.maxWeight) {
                this.candies.push(candy);
                this.currentWeight += candy.weight;
                return true;
            }
            return false;
        };

        Present.prototype.getTotalWeight = function() {
            return this.currentWeight;
        };

        Present.prototype.findCandiesBySugarRange = function(minSugar, maxSugar) {
            return this.candies.filter(candy =>
                candy.sugarContent >= minSugar && candy.sugarContent <= maxSugar
            );
        };

        Present.prototype.toString = function() {
            let result = `–ü–æ–¥–∞—Ä—É–Ω–æ–∫ (–º–∞–∫—Å. –≤–∞–≥–∞: ${this.maxWeight}–≥, –ø–æ—Ç–æ—á–Ω–∞: ${this.currentWeight}–≥)\n`;
            result += `–¶—É–∫–µ—Ä–æ–∫ —É –ø–æ–¥–∞—Ä—É–Ω–∫—É: ${this.candies.length}\n`;
            this.candies.forEach((candy, i) => {
                result += `${i + 1}. ${candy.toString()}\n`;
            });
            return result;
        };

        // –¶—É–∫–µ—Ä–∫–∏
        const candies = [
            new ChocolateCandy('–ß–µ—Ä–≤–æ–Ω–∏–π –º–∞–∫', 25, 45, 70),
            new ChocolateCandy('–¢—Ä—é—Ñ–µ–ª—å', 30, 50, 60),
            new Caramel('–ë–∞—Ä–±–∞—Ä–∏—Å', 15, 85, '–±–∞—Ä–±–∞—Ä–∏—Å'),
            new Caramel('–ú\'—è—Ç–Ω–∞', 20, 80, '–º\'—è—Ç–∞'),
            new Lollipop('–ß—É–ø–∞-—á—É–ø—Å', 12, 90, '–∫—É–ª—è'),
            new Lollipop('–í–µ—Å–µ–ª–∫–∞', 18, 88, '–∑—ñ—Ä–∫–∞'),
            new ChocolateCandy('–†–æ—à–µ–Ω', 28, 48, 65),
            new Caramel('–î—é—à–µ—Å', 22, 82, '–≥—Ä—É—à–∞')
        ];

        const candiesDiv = document.getElementById('candies-list');
        let tableHTML = '<table><tr><th>‚Ññ</th><th>–ù–∞–∑–≤–∞</th><th>–¢–∏–ø</th><th>–í–∞–≥–∞ (–≥)</th><th>–¶—É–∫–æ—Ä (%)</th></tr>';
        candies.forEach((candy, i) => {
            tableHTML += `<tr>
                <td>${i + 1}</td>
                <td>${candy.name}</td>
                <td>${candy.type}</td>
                <td>${candy.weight}</td>
                <td>${candy.sugarContent}</td>
            </tr>`;
        });
        tableHTML += '</table>';
        candiesDiv.innerHTML = tableHTML;

        const present = new Present(150);

        const presentDiv = document.getElementById('present-info');
        let presentHTML = '<div class="present-box">';
        presentHTML += `<h3>–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø–æ–¥–∞—Ä—É–Ω–∫–∞</h3>`;
        presentHTML += `<p><strong>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –≤–∞–≥–∞:</strong> ${present.maxWeight} –≥</p>`;
        presentHTML += `<h4>–î–æ–¥–∞—î–º–æ —Ü—É–∫–µ—Ä–∫–∏:</h4>`;

        candies.forEach(candy => {
            const added = present.addCandy(candy);
            if (added) {
                presentHTML += `<div class="candy-card">–î–æ–¥–∞–Ω–æ: ${candy.toString()}</div>`;
            } else {
                presentHTML += `<div class="candy-card">–ù–µ –≤–¥–∞–ª–æ—Å—è –¥–æ–¥–∞—Ç–∏: ${candy.toString()} (–ø–µ—Ä–µ–≤–∏—â–µ–Ω–æ –≤–∞–≥—É)</div>`;
            }
        });

        presentHTML += `<div class="weight-info">
            <strong>–ü—ñ–¥—Å—É–º–∫–æ–≤–∞ –≤–∞–≥–∞ –ø–æ–¥–∞—Ä—É–Ω–∫–∞:</strong> ${present.getTotalWeight()} –≥ –∑ ${present.maxWeight} –≥<br>
            <strong>–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ü—É–∫–µ—Ä–æ–∫:</strong> ${present.candies.length} —à—Ç.
        </div>`;
        presentHTML += '</div>';
        presentDiv.innerHTML = presentHTML;

        const searchDiv = document.getElementById('search-results');
        const ranges = [
            { min: 40, max: 60 },
            { min: 70, max: 90 },
            { min: 0, max: 50 }
        ];

        let searchHTML = '';
        ranges.forEach(range => {
            const found = present.findCandiesBySugarRange(range.min, range.max);
            searchHTML += `<div class="suitable-candies">`;
            searchHTML += `<h4>–î—ñ–∞–ø–∞–∑–æ–Ω: ${range.min}% - ${range.max}%</h4>`;
            if (found.length > 0) {
                searchHTML += `<p><strong>–ó–Ω–∞–π–¥–µ–Ω–æ ${found.length} —Ü—É–∫–µ—Ä–æ–∫:</strong></p><ul>`;
                found.forEach(candy => {
                    searchHTML += `<li>${candy.toString()}</li>`;
                });
                searchHTML += '</ul>';
            } else {
                searchHTML += '<p><em>–¶—É–∫–µ—Ä–æ–∫ —É —Ü—å–æ–º—É –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</em></p>';
            }
            searchHTML += '</div>';
        });
        searchDiv.innerHTML = searchHTML;

        console.log('=== –Ü—î—Ä–∞—Ä—Ö—ñ—è –ø—Ä–æ—Ç–æ—Ç–∏–ø—ñ–≤ ===');
        console.log('candies[0] instanceof ChocolateCandy:', candies[0] instanceof ChocolateCandy);
        console.log('candies[0] instanceof Candy:', candies[0] instanceof Candy);
        console.log('candies[2] instanceof Caramel:', candies[2] instanceof Caramel);
        console.log('candies[4] instanceof Lollipop:', candies[4] instanceof Lollipop);
    </script>
</body>
</html>